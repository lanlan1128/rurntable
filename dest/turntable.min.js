var $cj_btn=getEleById("cj-button"),pointer=getEleById("pointer");$cj_btn.onclick=function(){startGame()};var part=8,randomDeg,cycle=2,rotate;function startGame(){clearInterval(timer);rotate=0;randomDeg=Math.floor(Math.random()*360);if((randomDeg%(360/part))==0){randomDeg++}cycleDeg=cycle*360+randomDeg;oCycleDeg=(cycle*360+randomDeg)-220;speed=(220)/10;speed=Math.ceil(speed);timer=setInterval(function(){if(rotate>oCycleDeg-speed){setRotate(pointer,oCycleDeg);rotate=oCycleDeg;clearInterval(timer);playBox(cycleDeg)}else{rotate+=speed;setRotate(pointer,rotate)}},50)}var timer=null,speed;function playBox(target){clearInterval(timer);timer=setInterval(function(){speed=(target-rotate)/10;speed=Math.ceil(speed);if(rotate>=target){setRotate(pointer,target);clearInterval(timer);alert("恭喜您，获得"+is(randomDeg))}else{rotate+=speed;setRotate(pointer,rotate)}},50)}var jiang=[[1,45,"30元优惠券"],[45,90,"10元优惠券"],[90,135,"兰蔻新精华1支"],[135,180,"20元优惠券"],[180,225,"15元优惠券"],[225,270,"iphone6"],[270,315,"谢谢参与"],[315,360,"谢谢参与"]];function is(randomDeg){var i,res="";for(i=0;i<jiang.length;i++){if(randomDeg>=jiang[i][0]&&randomDeg<=jiang[i][1]){res=jiang[i][2]}}return res}window.onload=function(){var speed=40,rollBox=getEleById("award-list-box"),list=getEleById("award-list"),listCopy;if(rollBox.clientHeight<list.clientHeight){listCopy=document.createElement("ul");listCopy.innerHTML=list.innerHTML;rollBox.insertBefore(listCopy,list.nextSibling);function roll(){if(rollBox.scrollTop>=list.offsetHeight){rollBox.scrollTop=0}else{rollBox.scrollTop+=1}}}var rollTimer=setInterval(roll,speed);rollBox.onmouseover=function(){clearInterval(rollTimer)};rollBox.onmouseout=function(){rollTimer=setInterval(roll,speed)}};function getEleById(id){return document.getElementById(id)}function setRotate(obj,value){obj.style.webkitTransform="rotate("+value+"deg)";obj.style.mozTransform="rotate("+value+"deg)";obj.style.msTransform="rotate("+value+"deg)";obj.style.transform="rotate("+value+"deg)"};